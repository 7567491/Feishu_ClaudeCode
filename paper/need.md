# Paper 文献检索系统 - 需求文档

## 项目背景
飞书机器人需要智能文献检索功能，帮助用户快速获取学术论文的综述和 PDF 文件。当前实现分散在 `server/lib/` 目录，需重构为独立模块并优化文件组织结构。

## 核心需求

### 1. 功能需求
- **文献综述生成**：调用 Claude AI 生成指定主题的高质量文献综述
- **论文信息提取**：从综述中解析论文表格（作者、年份、标题、引用次数、期刊、中文翻译）
- **PDF 自动下载**：从多个数据源（arXiv、Google Scholar 等）并发下载论文 PDF
- **文件归档管理**：按关键词自动创建目录，统一管理综述和 PDF 文件

### 2. 文件组织需求
- **模块化**：将 paper 功能从 `server/lib/` 重构到 `./paper/` 独立目录
- **分类存储**：
  - 综述文件：`./paper/lit/{关键词}/{关键词}_文献综述.md`
  - PDF 文件：`./paper/lit/{关键词}/pdf/*.pdf`
  - 代码模块：`./paper/lib/*.js`
  - 测试文件：`./paper/tests/*.test.js`

### 3. 性能需求
- 并发下载（最多 3 个）避免资源过载
- 超时机制（60 秒/论文，120 秒/综述生成）
- 失败重试（最多 2 次）

### 4. 用户体验需求
- 实时进度反馈（通过飞书消息）
- 清晰的错误提示
- 文件去重（避免重复下载）

## 技术约束
- 兼容现有飞书 WebSocket 服务
- 保持 Claude CLI 调用方式
- 支持多数据源下载策略
