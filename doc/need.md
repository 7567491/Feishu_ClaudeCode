# 需求文档：Paper 文献检索下载系统

## 功能概述
为飞书机器人增加 `paper` 指令，实现智能文献检索、综述生成和 PDF 下载功能。

## 核心需求

### 1. 指令触发
- **输入格式**：`paper {关键词}`
- **示例**：`paper 人工智能`
- **触发位置**：飞书群聊或私聊

### 2. 文献综述生成
调用小六（Claude）生成文献综述，使用固定提示词：
```
使用高引用的真实文献写一段文献综述
{关键词}
最后用表格形式列出论文的作者、发表年份、论文名称、引用次数、发表期刊以及论文名中文翻译
```

### 3. PDF 下载
- 从 Claude 返回的表格中提取论文信息（标题、作者、年份）
- 调用 `/home/paper` 目录的现有脚本下载 PDF
- 保存到当前工作目录的 `./pdf` 子目录
- 支持多线程并发下载

### 4. 文件发送
- 将下载成功的 PDF 文件通过飞书机器人发送到对话
- 支持批量发送
- 显示下载进度和状态

## 技术约束
- 不创建独立 Git 仓库
- 利用现有 `/home/paper/smart_paper_downloader.py` 和 `pdf_manager.py`
- 集成到 `server/feishu-ws.js` 的消息处理流程
- 遵循飞书 API 文件上传规范

## 非功能需求
- 下载失败时提供明确错误提示
- 支持下载超时控制（每个 PDF 最多 60 秒）
- 日志记录所有操作步骤
- 可优雅中断下载任务

## 成功标准
1. 用户输入 `paper 深度学习` 后，收到文献综述和论文表格
2. 系统自动下载表格中的论文 PDF 到 `./pdf` 目录
3. 下载完成的 PDF 作为飞书消息附件发送
4. 整个流程在 5 分钟内完成（假设 10 篇论文）
